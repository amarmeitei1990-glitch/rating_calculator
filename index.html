<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Rating Calculator</title>
  <style>
    :root{
      --bg-grad: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 25%, #fbc2eb 50%, #a1c4fd 75%, #c2e9fb 100%);
      --card-grad: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.75));
      --accent-grad: linear-gradient(90deg,#6a11cb,#2575fc);
      --input-grad: linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.7));
      --muted: rgba(15,23,42,0.6);
      --shadow: 0 10px 30px rgba(15,23,42,0.12);
      --radius: 16px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background: var(--bg-grad);
      font-family:Inter, system-ui, Arial, sans-serif;
    }

    .card{
      width:100%;
      max-width:1000px;
      border-radius:var(--radius);
      padding:40px;
      background: var(--card-grad);
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px) saturate(120%);
      border: 1px solid rgba(255,255,255,0.3);
    }

    h1{
      margin:0 0 20px;
      font-size:28px;
      font-weight:700;
      color:#0f172a;
      text-align:center;
    }

    .grid{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:20px;
      margin-bottom:24px;
    }

    label{display:flex;flex-direction:column}
    .label-title{
      font-size:16px;
      margin-bottom:8px;
      font-weight:600;
      color:#0f172a;
    }

    input[type="text"]{
      padding:14px 16px;
      border-radius:10px;
      border:1px solid rgba(15,23,42,0.1);
      background: var(--input-grad);
      font-size:18px;
      color:#07132a;
      transition: all .15s ease;
    }
    input[type="text"]:focus{
      outline:none;
      box-shadow:0 6px 16px rgba(37,99,235,0.2);
    }

    .result{
      text-align:center;
      margin-top:20px;
    }

    .value{
      font-size:40px;
      font-weight:700;
      margin-bottom:8px;
    }

    .meta{
      font-size:18px;
      color:var(--muted);
    }

    .btn-clear{
      margin-top:24px;
      padding:14px 28px;
      border:none;
      border-radius:12px;
      font-size:18px;
      font-weight:600;
      background: var(--accent-grad);
      color:#fff;
      cursor:pointer;
      box-shadow:0 6px 20px rgba(37,99,235,0.3);
      transition: all .2s ease;
    }
    .btn-clear:hover{transform:translateY(-2px); box-shadow:0 10px 24px rgba(37,99,235,0.35);}
    .btn-clear:active{transform:translateY(0);}
    
    @media(max-width:700px){
      .grid{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="card" role="application">
    <h1>Rating Calculator</h1>
    <form id="calcForm" autocomplete="off" onsubmit="return false;">
      <div class="grid">
        <label><span class="label-title">1st week</span><input id="w1" type="text" inputmode="decimal"></label>
        <label><span class="label-title">2nd week</span><input id="w2" type="text" inputmode="decimal"></label>
        <label><span class="label-title">3rd week</span><input id="w3" type="text" inputmode="decimal"></label>
        <label><span class="label-title">4th week</span><input id="w4" type="text" inputmode="decimal"></label>
        <label><span class="label-title">5th week</span><input id="w5" type="text" inputmode="decimal"></label>
        <label><span class="label-title">6th week</span><input id="w6" type="text" inputmode="decimal"></label>
        <label><span class="label-title">7th week</span><input id="w7" type="text" inputmode="decimal"></label>
        <label><span class="label-title">8th week</span><input id="w8" type="text" inputmode="decimal"></label>
      </div>

      <div class="result">
        <div class="value" id="avgValue">— / 5</div>
        <div class="meta" id="countMeta">0 weeks included • —%</div>
      </div>
      <div style="text-align:center;">
        <button type="button" id="clearBtn" class="btn-clear">Clear</button>
      </div>
    </form>
  </div>

  <script>
    (function(){
      const inputs = [];
      for(let i=1;i<=8;i++){ inputs.push(document.getElementById('w'+i)); }
      const avgValue=document.getElementById('avgValue');
      const countMeta=document.getElementById('countMeta');
      const clearBtn=document.getElementById('clearBtn');

      function parseVal(v){
        if(!v) return null;
        const n=Number(v.trim());
        if(!Number.isFinite(n) || n<0 || n>5) return null;
        return n;
      }

      function formatNum(n){ return (Math.round(n*100)/100).toFixed(2); }

      function compute(){
        const vals=inputs.map(inp=>parseVal(inp.value));
        const present=vals.filter(x=>x!==null);
        if(present.length===0){
          avgValue.textContent='— / 5';
          countMeta.textContent='0 weeks included • —%';
          return;
        }
        const sum=present.reduce((a,b)=>a+b,0);
        const avg=sum/present.length;
        const pct=(avg/5)*100;
        avgValue.textContent=`${formatNum(avg)} / 5`;
        countMeta.textContent=`${present.length} week${present.length>1?'s':''} included • ${pct.toFixed(1)}%`;
      }

      inputs.forEach(inp=>{
        inp.addEventListener('input',compute);
      });

      clearBtn.addEventListener('click',()=>{
        inputs.forEach(inp=>inp.value='');
        compute();
        inputs[0].focus();
      });

      compute();
    })();
  </script>
</body>
</html>
